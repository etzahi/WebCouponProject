<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!---- define the ADMIN SPA Controller---->
	<title>Admin</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>	
</head>


<body>
	<script>

		function comapniesFunc() {
			
			$("compTbl").attr("href",false);
			$.getJSON("http://localhost:8080/com.tzahia/rest/admin/getAllCompanies", function (result) {

				$.each(result, function (i, item) {
					$("#compTbl").append(
						"<tr>"
						+ "<td>" + item.id + "</td>"
						+ "<td>" + item.compName + "</td>"
						+ "<td> <button class='button' onClick='removeCompany(" + item.id + ")'> Delete </button> </td>" +
						+ "</tr>")
				})
			});
		}

		function removeCompany(compId) {
			console.log("removing id: " + compId)
			$.getJSON("http://localhost:8080/com.tzahia/rest/admin/removeCompany?compId=" + compId, function (result) {
				alert(JSON.stringify(result))
			})
		}

		
	</script>

	<header>
		<div>
			<h1>Admin page</h1>
		</div>
		<hr />
	</header>

	<section>

		<div name="menu" id="mainMenu">
			<h2>Companies</h2>
			<div name="comapniesDiv" id="compDiv">

				<button id="compBtn" class="button" onClick="comapniesFunc()">
							Show Companies
						</button>

				<table name="comapniesTable" id="compTbl">
					<tr>
						<th>ID</th>
						<th>Company Name</th>
						<th>Remove company</th>
					</tr>
				</table>

				<br>
				<h3> Add a new company</h3>
				<form id="addCompanyFrm" action="http://localhost:8080/com.tzahia/rest/admin/createCompany">
					Company name: <input type="text" name="name"><br> Company pass: <input type="text" name="pass"><br> Company email:
					<input type="text" name="email"><br>
					<input type="submit" value="Add company">
				</form>
			</div>

			<h2>Customers</h2>
				<button id="custBtn" class="button" onClick="customersFunc()">
							Open Customers</button>
			
			<div name="customersDiv" id="custDiv">This is the customers div
			</div>
		</div>

	</section>

</body>

</html>